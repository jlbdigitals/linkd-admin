generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url      = env("DATABASE_URL")
}

model Company {
  id              String                  @id @default(uuid())
  name            String
  slug            String                  @unique
  logoUrl         String?
  createdAt       DateTime                @default(now())
  updatedAt       DateTime                @updatedAt
  colorTop        String?
  colorBottom     String?
  gradientAngle   Int?                    @default(135)
  bgImageUrl      String?
  fieldVisibility CompanyFieldVisibility?
  customFields    CustomField[]
  employees       Employee[]
  maxEmployees    Int                     @default(5)
  isLightText     Boolean                 @default(false)
  deletedAt       DateTime?
  ownerEmail      String?
}

model Employee {
  id                String                @id @default(uuid())
  slug              String                @unique
  name              String
  photoUrl          String?
  jobTitle          String?
  whatsapp          String?
  phone             String?
  email             String?
  website           String?
  instagram         String?
  linkedin          String?
  googleReviews     String?
  isAdmin           Boolean               @default(false)
  companyId         String
  createdAt         DateTime              @default(now())
  updatedAt         DateTime              @updatedAt
  clickLogs         ClickLog[]
  company           Company               @relation(fields: [companyId], references: [id], onDelete: Cascade)
  customFieldValues EmployeeCustomField[]
}

model VerificationToken {
  identifier String
  token      String
  expires    DateTime
  createdAt  DateTime @default(now())

  @@unique([identifier, token])
}

model SuperAdmin {
  id        String   @id @default(uuid())
  email     String   @unique
  createdAt DateTime @default(now())
}

model CustomField {
  id          String                @id @default(uuid())
  companyId   String
  label       String
  icon        String
  placeholder String?
  order       Int                   @default(0)
  createdAt   DateTime              @default(now())
  company     Company               @relation(fields: [companyId], references: [id], onDelete: Cascade)
  values      EmployeeCustomField[]
}

model EmployeeCustomField {
  id            String      @id @default(uuid())
  employeeId    String
  customFieldId String
  value         String
  customField   CustomField @relation(fields: [customFieldId], references: [id], onDelete: Cascade)
  employee      Employee    @relation(fields: [employeeId], references: [id], onDelete: Cascade)

  @@unique([employeeId, customFieldId])
}

model CompanyFieldVisibility {
  id                String  @id @default(uuid())
  companyId         String  @unique
  showWhatsapp      Boolean @default(true)
  showEmail         Boolean @default(true)
  showPhone         Boolean @default(true)
  showWebsite       Boolean @default(true)
  showInstagram     Boolean @default(true)
  showLinkedin      Boolean @default(true)
  showGoogleReviews Boolean @default(false)
  company           Company @relation(fields: [companyId], references: [id], onDelete: Cascade)
}

model ClickLog {
  id              String   @id @default(uuid())
  employeeId      String
  interactionType String
  buttonType      String?
  createdAt       DateTime @default(now())
  employee        Employee @relation(fields: [employeeId], references: [id], onDelete: Cascade)
}
